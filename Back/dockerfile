# JDK ì„¤ì • (Alpine ê¸°ë°˜)
FROM openjdk:17-jdk-alpine

# ì‘ì—… í´ë” ì„¤ì •
WORKDIR /app

# xargs ì„¤ì¹˜
RUN apk update && apk add findutils

# ë¹Œë“œ íŒŒì¼ ë³µì‚¬
COPY gradlew .
COPY gradlew.bat .
COPY gradle gradle
COPY build.gradle .
COPY settings.gradle .
COPY src src

# í˜¹ì‹œëª¨ë¥¼ ê¶Œí•œì„¤ì •
RUN chmod +x gradlew

# ë¹Œë“œ
RUN ./gradlew build

# ê²°ê³¼ íŒŒì¼ ë³µì‚¬
COPY build/libs/*.jar /app/backend.jar

# í¬íŠ¸ ì„¤ì • (nginxì—ì„œ í”„ë¡ì‹œí•  ê²ƒ)
EXPOSE 8080

# Run ğŸš€
CMD ["java", "-jar", "backend.jar"]
